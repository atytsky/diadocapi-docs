SignedContent
=============

Структура ``SignedContent`` представляет собой подписываемые данные в отправляемом сообщении.

.. code-block:: protobuf

    message SignedContent {
        optional bytes Content = 1;
        optional bytes Signature = 2;
        optional string NameOnShelf = 4;
        optional bool SignWithTestSignature = 5 [default = false];
        optional string SignatureNameOnShelf = 6;
        optional PowerOfAttorneyToPost PowerOfAttorney = 7;
    }

- ``Content`` — бинарное содержимое подписываемого документа. Значение должно быть пустым, если заполнено поле ``NameOnShelf``.

- ``NameOnShelf`` — имя подписываемого документа на :doc:`полке документов <../entities/shelf>`. Значение должно быть пустым, если заполнено поле ``Content``.

- ``Signature`` — электронная подпись (ЭП). Необязательный параметр. Если присутствует, должна быть представлена в формате :rfc:`CMS SignedData <5652#section-5>` в `DER <http://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf>`__-кодировке.

- ``SignWithTestSignature`` — флаг, который позволяет запросить формирование тестовой ЭП под пересылаемыми данными.

- ``SignatureNameOnShelf`` — имя подписи на :doc:`полке документов <../entities/shelf>`.

- ``PowerOfAttorney`` — данные машиночитаемой доверенности, представленные структурой :doc:`PowerOfAttorneyToPost`.

Сервер может не обработать запрос, содержащий структуры ``SignedContent`` большого размера, поэтому:

- если размер подписываемого документа меньше 500Кб, его бинарное представление можно разместить в поле ``Content``.

- если размер документа больше, сначала загрузите его на полку документов методом :doc:`../http/ShelfUpload`. После загрузки укажите имя документа на полке в поле ``NameOnShelf``.

Ограничения на размер передаваемых документов действуют не только на уровне отдельного документа, но и на уровне запроса к серверу. Если запрос к серверу содержит несколько документов (несколько структур ``SignedContent``), то суммарный размер передаваемых в рамках запроса данных не должен превышать 70Мб с учетом служебной информации. Мы рекомендуем загружать документы на полку документов, чтобы повысить устойчивость интеграционного решения.

----

.. rubric:: См. также

*Структура используется:*
	- в структуре :doc:`MessagePatchToPost`
	- в структуре :doc:`MessageToPost`