Сертификат
==========

**Сертификат** — файл, содержащий открытый ключ и информацию о владельце электронной подписи.

Сертификат выдается удостоверяющим центром (УЦ) и подтверждает, что открытый ключ принадлежит конкретному лицу. Кроме данных владельца, сертификат содержит информацию об УЦ, сроке действия, полномочиях и области применения. У каждого сертификата есть уникальный отпечаток, который можно передавать в методы вместо файла сертификата.

Вместе с сертификатом выпускается закрытый ключ, с помощью которого можно подписывать документы. Закрытый ключ хранится только у владельца, сертификат можно передавать контрагентам для обмена зашифрованными документами.

По сертификату можно создать ящик организации с помощью метода :doc:`../http/Register`. В теле запроса метода можно передать как файл сертификата, так и его отпечаток. Метод также позволяет автоматически добавить владельца сертификата в сотрудники организации. При добавлении сотрудника сертификат подтверждает владение закрытым ключом методом :doc:`../http/RegisterConfirm`.

В API Диадока можно авторизоваться по сертификату, для этого используйте следующие методы: 

	- передайте сертификат в теле запроса метода :doc:`../http/Authenticate` и расшифруйте ответ закрытым ключом, 
	- передайте расшифрованный ответ и сертификат в метод :doc:`../http/AuthenticateConfirm` и получите авторизационный токен.

Сертификат можно выпустить на руководителя организации и на физическое лицо:

	- Сертификат на руководителя организации или ИП можно получить только в удостоверяющем центре ФНС или у ее доверенных УЦ. У руководителя может быть только один действующий сертификат.
	- Сертификат на физическое лицо можно получить в любом коммерческом УЦ. В таком сертификате нет информации об организации. При подписании документов от имени организации к подписи нужно прикладывать :doc:`машиночитаемую доверенность<../howto/powerofattorney>`.

Существуют сертификаты неквалифицированной электронной подписи (НЭП) и квалифицированной электронной подписи (КЭП):

	- Сертификат НЭП не придает документам юридическую силу. Его можно использовать для внутреннего документооборота, например кадрового, или для подачи физлицами налоговой декларации и обмена документами по сделкам между самозанятыми. Перед подписанием документов сертификатом НЭП стороны должны заключить между собой письменное соглашение. 
	- Сертификат КЭП обеспечивает юридическую силу документу и не требует дополнительного соглашения для использования. Удостверяющий центр СКБ Контур выпускает только сертификаты КЭП.

Экспортировать сертификат открытого ключа можно по `инструкции в Контур.Справке <https://support.kontur.ru/ca/38786-eksport_fajla_otkrytogo_klyucha>`__.

Представление в API
-------------------
*Структуры для работы с сертификатами:*
 - :doc:`../proto/CertificateInfoV2` — хранит информацию о сертификате пользователя.

*Методы для работы с сертификатами:*
 - :doc:`../http/GetMyCertificates` — возвращает информацию о сертификатах, привязанных к сотруднику.
 - :doc:`../http/GetCounteragentCertificates` — возвращает сертификаты контрагента.
