GetMyOrganizations
==================

Метод ``GetMyOrganizations`` возвращает список ящиков, к которым у пользователя есть доступ.

.. http:get:: /GetMyOrganizations

	:queryparam autoRegister: флаг, указывающий, нужно ли регистрировать пользователя в организацию из сертификата. Пользователь будет зарегистрирован, если в ящике нет действующего администратора и активных пользователей. По умолчанию имеет значение ``true``.

	:requestheader Authorization: данные, необходимые для :doc:`авторизации <../Authorization>`.

	:statuscode 200: операция успешно завершена.
	:statuscode 401: в запросе отсутствует HTTP-заголовок ``Authorization`` или в этом заголовке содержатся некорректные авторизационные данные.
	:statuscode 405: используется неподходящий HTTP-метод.
	:statuscode 500: при обработке запроса возникла непредвиденная ошибка.

	:response Body: Тело ответа содержит список всех ящиков, к которым у пользователя есть доступ. Список представлен структурой :doc:`OrganizationList <../proto/Organization>`.

Если организации нет в Диадоке и у пользователя есть сертификат КЭП, метод зарегистрирует новую организацию на основе информации из сертификата и ЕГРЮЛ/ЕГРИП. Информация об организации вернется в ответе вместе со списком ящиков, к которым у пользователя уже есть доступ.

Если в организации нет действующего администратора и активных пользователей, то по умолчанию метод зарегистрирует пользователя в организации и назначит ему права администратора. Регистрация пройдет, если выполняются :doc:`условия <../MiscellaneousApiFeatures>`. Чтобы пользователь не зарегистрировался, передайте флаг ``autoRegister = false``. В этом случае будет зарегистрирована только организация.

Если организация уже есть в Диадоке, метод с флагом ``autoRegister = false`` вернет информацию об организации из сертификата без повторной регистрации.

Если у пользователя нет сертификата, в ответ метод вернет только список организаций, к которым у пользователя есть доступ.