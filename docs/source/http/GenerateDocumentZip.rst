GenerateDocumentZip
===================

Метод ``GenerateDocumentZip`` формирует ZIP-архив, содержащий документ, относящиеся к нему подписи и, если указано, — файлы документооборота по данному документу.

.. http:get:: /GenerateDocumentZip

	:queryparam boxId: идентификатор :doc:`ящика <../../entities/box>` организации.
	:queryparam messageId: идентификатор сообщения.
	:queryparam documentId: идентификатор документа в сообщении, для которого требуется сгенерировать архив.
	:queryparam fullDocflow: признак того, что архив должен включать в себя все файлы документооборота. Принимает значения ``true`` или ``false``.

	:requestheader Authorization: данные, необходимые для :doc:`авторизации <../Authorization>`.

	:statuscode 200: операция успешно завершена.
	:statuscode 204: операция еще не завершена. В HTTP-заголовке ответа ``Retry-After`` указано время в секундах, через которое нужно повторить запрос.
	:statuscode 400: данные в запросе имеют неверный формат или отсутствуют обязательные параметры.
	:statuscode 401: в запросе отсутствует HTTP-заголовок ``Authorization`` или в этом заголовке содержатся некорректные авторизационные данные.
	:statuscode 402: у организации с указанным идентификатором ``boxId`` закончилась подписка на API.
	:statuscode 403: доступ к ящику с предоставленным авторизационным токеном запрещен или у пользователя нет доступа к запрашиваемому документу.
	:statuscode 404: в указанном ящике нет сообщения с идентификатором ``messageId`` или в указанном сообщении нет сущности с идентификатором ``documentId``.
	:statuscode 405: используется неподходящий HTTP-метод.
	:statuscode 409: невозможно сформировать архив для указанного документа.
	:statuscode 500: при обработке запроса возникла непредвиденная ошибка.

	:responseheader Retry-After: если в ответе содержится HTTP-заголовок ``Retry-After``, то предыдущий вызов этого метода с таким же идентификатором операции еще не завершен. В этом случае следует повторить вызов через указанное в заголовке время (в секундах), чтобы убедиться, что операция завершилась без ошибок.

	:response Body: Тело ответа содержит структуру :doc:`../proto/DocumentZipGenerationResult`. Если запрошенный архив уже сгенерирован, то структура будет содержать данные для его скачивания методом :doc:`ShelfDownload`.

Имена файлов в сгенерированном архиве не позволяют однозначно определить их содержимое.
Если вы хотите однозначно определить содержимое и параметры каждой сущности в сообщении:

 1. Используйте метод :doc:`GetMessage`, чтобы получить :doc:`сообщение <../entities/message>`,
 2. Используйте метод :doc:`GetEntityContent`, чтобы получить содержимое и параметры каждой :doc:`сущности <../entities/entity>` в сообщении.